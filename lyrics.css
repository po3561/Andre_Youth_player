/* [lyrics.css] 가사 크기 및 레이아웃 수정 */

.player-body {
    position: relative; width: 100%; height: 100%; overflow: hidden;
}

/* 1. 상단 앨범 아트 */
.album-section {
    position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
    width: 85%; aspect-ratio: 1; border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3); z-index: 1;
}
.album-art { width: 100%; height: 100%; object-fit: cover; }

/* 2. 정보창 Wrapper (터치 영역 확보) */
.info-section-wrapper {
    position: absolute; bottom: 150px; left: 20px; right: 20px;
    height: 90px; z-index: 100; /* 컨트롤러보다 뒤, 앨범보다 앞 */
    pointer-events: auto; /* [중요] 터치 가능 */
}

/* 3. 정보창 Card (확장 애니메이션) */
.info-card {
    position: absolute; bottom: 0; left: 0; width: 100%; height: 100%;
    display: flex; flex-direction: column; padding: 18px 25px;
    border-radius: 22px;
    background: rgba(255, 255, 255, 0.12);
    backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    overflow: hidden;
    transition: height 0.5s cubic-bezier(0.32, 0.72, 0, 1);
    transform-origin: bottom; cursor: pointer;
}

/* 확장 상태 */
.info-card.active {
    height: 70vh; /* 위로 커짐 */
    backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px);
    border-radius: 30px; 
    box-shadow: 0 -20px 50px rgba(0,0,0,0.5);
    z-index: 500; /* [중요] 확장 시 컨트롤러 위로 올라옴 */
}

/* 헤더 텍스트 */
.info-header-row { display: flex; justify-content: space-between; align-items: center; width: 100%; flex-shrink: 0; }
.text-group { flex: 1; min-width: 0; padding-right: 15px; }
#disp-title { font-size: 1.1rem; font-weight: 800; color: #fff; margin-bottom: 2px; }
#disp-artist { font-size: 0.85rem; color: var(--primary); font-weight: 700; transition: 0.3s; }

/* 4. 가사 텍스트 스타일 (크기 축소) */
.full-lyrics-container {
    flex: 1; opacity: 0; visibility: hidden; margin-top: 20px;
    overflow-y: auto; scroll-behavior: smooth;
    -ms-overflow-style: none; scrollbar-width: none;
    transition: opacity 0.3s ease 0.1s;
    padding-top: 40%; padding-bottom: 40%; /* 중앙 정렬용 여백 */
}
.full-lyrics-container::-webkit-scrollbar { display: none; }
.info-card.active .full-lyrics-container { opacity: 1; visibility: visible; }

/* [수정] 가사 폰트 크기 줄임 */
.lyric-line {
    font-size: 1.15rem; /* 기존 1.4rem -> 1.15rem */
    font-weight: 600; color: rgba(255, 255, 255, 0.35);
    margin-bottom: 24px; text-align: center; transition: 0.3s; line-height: 1.4;
    word-break: keep-all;
}
.lyric-line.active { 
    color: #fff; transform: scale(1.08); font-weight: 800; 
    text-shadow: 0 0 15px rgba(255,255,255,0.2); 
}

.expand-handle { width: 40px; height: 5px; background: rgba(255,255,255,0.3); border-radius: 3px; margin: 10px auto 0; opacity: 0; transition: 0.3s; flex-shrink: 0; }
.info-card.active .expand-handle { opacity: 1; }

/* 5. 하단 컨트롤러 (위치 고정) */
.bottom-controls-container {
    position: absolute; bottom: 0; left: 0; width: 100%; height: 140px;
    padding: 0 20px 30px; z-index: 200; /* 평소 정보창보다 위 */
    display: flex; flex-direction: column; justify-content: flex-end;
    background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
    pointer-events: none; /* [중요] 배경 터치 통과 */
}
.playback-section, .control-section { pointer-events: auto; /* 버튼만 터치 가능 */ }
.playback-section { margin-bottom: 15px; width: 100%; }
.control-section { display: flex; justify-content: space-between; align-items: center; width: 100%; }

/* 6. 팝업창 (채팅, 저작권) - 최상위 레이어 */
.ios-popup {
    position: fixed; inset: 0; z-index: 9999; /* [중요] 무조건 최상위 */
    display: flex; align-items: center; justify-content: center;
    background: rgba(0,0,0,0.5); backdrop-filter: blur(8px);
    visibility: hidden; opacity: 0; transition: 0.3s; pointer-events: none;
}
.ios-popup.active { visibility: visible; opacity: 1; pointer-events: auto; }
.popup-card.glass-card { width: 90%; max-width: 380px; height: 70vh; background: #fff; border-radius: 25px; display: flex; flex-direction: column; overflow: hidden; }

/* 플레이리스트 */
.bottom-sheet.glass-sheet {
    position: fixed; bottom: 0; left: 50%; transform: translateX(-50%);
    width: 100%; height: 85vh; 
    background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(25px);
    border-radius: 35px 35px 0 0; z-index: 5000;
    transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
    visibility: hidden; opacity: 0; pointer-events: none;
}
.bottom-sheet.expanded { visibility: visible; opacity: 1; pointer-events: auto; }